# Turing Test Frontend Deployment

This repository contains the deployment framework for a Turing Test frontend, designed to compare the effectiveness of diffusion models and GANs in generating medical images. The primary purpose is to evaluate how well these generated images can fool real medical experts, and assess the realism of these images on a continuous scale.

## Features

- **Evaluation Sessions**: Create evaluation sessions using Azure credentials.
- **Realism Scoring**: Assess the realism of generated images on a continuous scale.
- **Time Tracking**: Record the time taken for each evaluation.
- **Classification Features**: Mark if a calcification is seen in an image.
- **Data Storage**: All evaluation results are stored in Azure Blob Storage.

## Docker Compose Setup

The framework is set up to run within a Docker container. Below is the Docker Compose configuration used to deploy the application:

```yaml
version: '3.8'

services:
  web:
    image: molinamarc/learnings:turingv1.0
    container_name: turing
    ports:
      - "8000:8000"
    environment:
      - AZURE_STORAGE_CONNECTION_STRING=
      - CONTAINER_NAME=
      - TOTAL_IMAGES=
```

### Configuration Parameters

- **`AZURE_STORAGE_CONNECTION_STRING`**: The connection string to your Azure Storage account. This is required to save evaluation results in Azure Blob Storage. 
  - **How to Set**: Obtain the connection string from your Azure portal under the "Access keys" section of your storage account. 
- **`CONTAINER_NAME`**: The name of the Azure Blob Storage container where results will be stored.
  - **How to Set**: Create a container in your Azure Storage account and provide its name here.
- **`TOTAL_IMAGES`**: The total number of images to be evaluated in the session. Default is set to `421`.

### Deployment Instructions

1. **Clone the Repository**: 
   ```bash
   git clone https://github.com/your-username/turing-test-frontend.git
   cd turing-test-frontend
   ```

2. **Set Environment Variables**:
   Make sure to set the following environment variables in your `.env` file or directly in the `docker-compose.yml` file:
   - `AZURE_STORAGE_CONNECTION_STRING`
   - `CONTAINER_NAME`
   - `TOTAL_IMAGES`

3. **Run Docker Compose**:
   Start the service using Docker Compose:
   ```bash
   docker-compose up -d
   ```

4. **Access the Application**:
   The application will be available at `http://localhost:8000`. You can access it in your browser to start the evaluation sessions.

### Application Workflow

1. **Launch Session**: Navigate to the web interface and launch a new evaluation session.
2. **Evaluate Images**: Experts will evaluate the images generated by diffusion models and GANs. The evaluation includes:
   - **Real vs. Fake Classification**: Determining if an image is real or generated.
   - **Realism Scoring**: Rating the realism of the image on a continuous scale.
   - **Calcification Check**: Noting if any calcifications are seen in the image.
   - **Time Recording**: Automatically recording the time taken for each evaluation.
3. **Save Results**: All results, including classifications, realism scores, and time data, are saved in the specified Azure Blob Storage container.

### Prerequisites

- **Docker**: Ensure that Docker is installed on your system.
- **Azure Account**: You will need an Azure account with access to Blob Storage.

## Contributing

Contributions to enhance this framework are welcome. Please feel free to submit a pull request or open an issue for discussion.

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for more details.

